#include<stdio.h>
#include<stdlib.h>
#include<graphics.h>
#include<dos.h>
#include<time.h>
#include<math.h>
int c1,c2=0,c3=0,count=0;
char zhe16K[]={                                    /*汉字点阵*/
  0x02,0x00,0x02,0x00,0x02,0x10,0x03,0xA0,
  0x0E,0x40,0x02,0xFE,0xFF,0x00,0x02,0x00,
  0x07,0xC0,0x0C,0x40,0x17,0x40,0x24,0x40,
  0xC7,0xC0,0x04,0x40,0x00,0x40,0x00,0x00,
};
char zuo16K[]={
  0x00,0x40,0x08,0x40,0x08,0x80,0x08,0x9C,
  0x11,0xE0,0x31,0x40,0x52,0x40,0x94,0x78,
  0x10,0x40,0x10,0x40,0x10,0x78,0x10,0x40,
  0x10,0x40,0x00,0x40,0x00,0x40,0x00,0x00,
};
char zhan16K[]={
  0x01,0x00,0x03,0xE0,0x04,0x40,0x00,0xF0,
  0x1F,0x40,0x12,0xA0,0x14,0xFC,0x1F,0x00,
  0x11,0x80,0x10,0x60,0x23,0x80,0x20,0x60,
  0x47,0xA0,0x84,0x20,0x03,0xC0,0x00,0x00,
};
char zhao16K[]={
  0x00,0x00,0x00,0x00,0x38,0x38,0x49,0xC8,
  0x48,0x48,0x48,0x88,0x78,0xB0,0x49,0x00,
  0x4A,0x38,0x49,0xC8,0x79,0x08,0x49,0x18,
  0x01,0xE0,0x00,0x00,0x00,0x00,0x00,0x00,
};
char ji16K[]={
  0x01,0x00,0x01,0x00,0x01,0x00,0x01,0x00,
  0x01,0xFC,0x7F,0x00,0x01,0x00,0x01,0xF0,
  0x0F,0x00,0x00,0x00,0x03,0xF0,0x0C,0x10,
  0x08,0x20,0x07,0xE0,0x04,0x00,0x00,0x00,
};
char han32L[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x01,0x00,0x00,
  0x03,0x03,0xFF,0xC0,0x03,0xC3,0x01,0xC0,
  0x01,0xE0,0x00,0x80,0x00,0x02,0x01,0x80,
  0x00,0x01,0x01,0x80,0x38,0x00,0x81,0x00,
  0x3E,0x00,0x43,0x00,0x1F,0x80,0x26,0x00,
  0x00,0x00,0x1E,0x00,0x00,0x00,0x0C,0x00,
  0x00,0x00,0x1E,0x00,0x00,0x20,0x3F,0x80,
  0x01,0xC0,0xE1,0xE0,0x07,0x87,0x80,0xF8,
  0x07,0x3E,0x00,0x7C,0x04,0x18,0x00,0x3C,
  0x00,0x00,0x00,0x18,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char nuo32L[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x06,0x00,0x43,0x00,
  0x07,0x07,0xFF,0xF0,0x03,0xCF,0xFF,0xF0,
  0x00,0x00,0x43,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x18,0x00,0x3F,0x9F,0xFF,0xFE,
  0x3F,0xFF,0xFF,0xFC,0x01,0x20,0x60,0x18,
  0x01,0x00,0xC0,0x00,0x00,0x03,0xFF,0xC0,
  0x00,0x0F,0xFF,0xE0,0x00,0x18,0x00,0x60,
  0x03,0x00,0x00,0x40,0x03,0xC0,0x00,0x40,
  0x07,0x80,0x7F,0xC0,0x07,0x00,0x7F,0xC0,
  0x02,0x00,0x40,0xC0,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

char ta32L[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x01,0x02,0x00,0x01,0x01,0x02,0x00,
  0x01,0x0F,0xFF,0xC0,0x01,0x1F,0xFF,0xE0,
  0x01,0x01,0x02,0x00,0x01,0x00,0x10,0x00,
  0x1F,0xE0,0x30,0x00,0x1F,0xC0,0xCE,0x00,
  0x01,0x01,0x83,0x80,0x01,0x0E,0x00,0xF8,
  0x01,0x18,0xFC,0x7C,0x01,0x00,0xC0,0x1C,
  0x01,0xE0,0x00,0x00,0x3F,0xC7,0xFF,0x80,
  0x3F,0x07,0xFF,0x80,0x38,0x00,0x01,0x80,
  0x00,0x02,0x01,0x80,0x00,0x03,0xFF,0x00,
  0x00,0x03,0xFF,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char yan32L[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x30,0x00,0x00,0x00,0x30,0x00,
  0x0E,0x00,0x30,0x00,0x0F,0x1F,0xFF,0xF0,
  0x03,0x9C,0x00,0x70,0x00,0x10,0x00,0x10,
  0x00,0x03,0xFF,0x10,0x30,0x00,0x10,0x00,
  0x3C,0x07,0xFF,0x80,0x3F,0x06,0x10,0xC0,
  0x00,0x04,0x10,0x80,0x00,0x07,0xFF,0x80,
  0x00,0x00,0x10,0x80,0x00,0xC3,0xFF,0x80,
  0x03,0x83,0xFF,0x80,0x0F,0x00,0x00,0x00,
  0x0E,0x01,0x83,0x00,0x0C,0x07,0x01,0xC0,
  0x00,0x1C,0x00,0x60,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};

char shi32L[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x7F,0xFC,0x00,
  0x00,0xFF,0xFE,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x1F,0xFF,0xFF,0xFC,0x1F,0xFF,0xFF,0xFC,
  0x38,0x01,0x81,0xFC,0x00,0x01,0x80,0x18,
  0x00,0x21,0x84,0x00,0x00,0x61,0x8E,0x00,
  0x00,0xC1,0x87,0x00,0x01,0x81,0x83,0x80,
  0x03,0x01,0x81,0xC0,0x06,0x01,0x80,0x40,
  0x08,0x03,0x80,0x20,0x00,0x3F,0x80,0x00,
  0x00,0x1F,0x80,0x00,0x00,0x06,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char yi16K[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x7C,0x7F,0x86,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char er16K[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xF0,
  0x0F,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x0C,0x03,0xFE,0xFC,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char san16K[]={
  0x00,0x00,0x00,0x00,0x00,0x00,0x01,0xE0,
  0x0E,0x00,0x00,0x00,0x00,0x00,0x01,0xC0,
  0x0E,0x00,0x00,0x00,0x00,0x00,0x01,0xFC,
  0x7E,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char yi16S[]={
/* 以下是 '移' 的 16点阵宋体 字模，32 byte */
  0x0C,0x40,0x70,0x7C,0x10,0x84,0x15,0x08,
  0xFE,0x50,0x30,0x20,0x30,0xD0,0x5B,0x20,
  0x54,0x7E,0x90,0x84,0x11,0x88,0x12,0x50,
  0x10,0x20,0x10,0x40,0x11,0x80,0x16,0x00,
};
char dong16S[]={
/* 以下是 '动' 的 16点阵宋体 字模，32 byte */
  0x00,0x20,0x00,0x20,0x7E,0x20,0x00,0x20,
  0x00,0xFC,0xFF,0x24,0x10,0x24,0x10,0x24,
  0x24,0x24,0x22,0x24,0x4F,0x44,0xFA,0x44,
  0x40,0x84,0x01,0x14,0x02,0x08,0x00,0x00,
};
char ci16S[]={
/* 以下是 '次' 的 16点阵宋体 字模，32 byte */
  0x01,0x00,0x41,0x00,0x25,0x00,0x25,0xFE,
  0x2A,0x44,0x0A,0x48,0x14,0x40,0x10,0x40,
  0x20,0xC0,0xE0,0xA0,0x41,0x20,0x42,0x10,
  0x44,0x08,0x18,0x0E,0x60,0x04,0x00,0x00,
};
char shu16S[]={
/* 以下是 '数' 的 16点阵宋体 字模，32 byte */
  0x08,0x20,0x49,0x30,0x2A,0x20,0x1C,0x20,
  0xFF,0x7E,0x1C,0x44,0x2B,0x44,0x48,0xC4,
  0x08,0x28,0xFF,0x28,0x12,0x10,0x34,0x10,
  0x0C,0x28,0x32,0x4E,0xC0,0x84,0x00,0x00,
};


char zan16S[]={
/* 以下是 '暂' 的 16点阵宋体 字模，32 byte */
  0x08,0x00,0x7E,0xFC,0x10,0x80,0x28,0x80,
  0x7E,0xFE,0x08,0x88,0x0E,0x88,0xF9,0x08,
  0x0A,0x08,0x1F,0xF0,0x10,0x10,0x1F,0xF0,
  0x10,0x10,0x10,0x10,0x1F,0xF0,0x00,0x00,
};
char ting16S[]={
/* 以下是 '停' 的 16点阵宋体 字模，32 byte */
  0x08,0x40,0x0C,0x20,0x0B,0xFE,0x10,0x00,
  0x11,0xF8,0x31,0x08,0x51,0xF8,0x90,0x00,
  0x17,0xFE,0x14,0x02,0x11,0xFC,0x10,0x20,
  0x10,0x20,0x10,0x20,0x10,0xA0,0x10,0x40,
};
char tui16S[]={
/* 以下是 '退' 的 16点阵宋体 字模，32 byte */
  0x40,0x00,0x27,0xF0,0x24,0x10,0x07,0xF0,
  0x04,0x10,0x04,0x10,0xE7,0xF0,0x24,0x88,
  0x24,0x50,0x24,0x20,0x25,0x10,0x26,0x18,
  0x24,0x08,0x50,0x00,0x8F,0xFE,0x00,0x00,
};
char chu16S[]={
/* 以下是 '出' 的 16点阵宋体 字模，32 byte */
  0x01,0x00,0x01,0x00,0x21,0x04,0x21,0x04,
  0x21,0x04,0x21,0x04,0x3F,0xFC,0x21,0x04,
  0x01,0x00,0x21,0x04,0x21,0x04,0x21,0x04,
  0x21,0x04,0x3F,0xFC,0x20,0x04,0x00,0x00,
};
char xie64S[]={
/* 以下是 '谢' 的 64点阵宋体 字模，512 byte */
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x02,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x03,0x80,0x00,0x10,0x00,
  0x00,0x00,0x00,0x03,0x80,0x00,0x1C,0x00,
  0x00,0x60,0x00,0x03,0x00,0x00,0x1C,0x00,
  0x00,0x30,0x00,0x02,0x00,0x00,0x18,0x00,
  0x00,0x18,0x00,0x06,0x00,0x00,0x18,0x00,
  0x00,0x0C,0x00,0x04,0x00,0x00,0x18,0x00,
  0x00,0x0E,0x00,0x00,0x00,0x00,0x18,0x00,
  0x00,0x0E,0x01,0x00,0x0C,0x00,0x18,0x00,
  0x00,0x06,0x01,0xFF,0xFE,0x00,0x18,0x00,
  0x00,0x06,0x01,0x80,0x0E,0x00,0x18,0x00,
  0x00,0x00,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x01,0x80,0x0C,0x00,0x18,0x60,
  0x00,0x00,0x01,0xFF,0xFC,0x7F,0xFF,0xF0,
  0x00,0x00,0x01,0x80,0x0C,0x20,0x18,0x00,
  0x00,0x18,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x1F,0xFC,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x18,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x01,0xFF,0xFC,0x00,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x20,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x10,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x18,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x0C,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x0E,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x06,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x06,0x18,0x00,
  0x00,0x10,0x01,0x80,0x0C,0x06,0x18,0x00,
  0x00,0x10,0x7F,0xFF,0xFC,0x06,0x18,0x00,
  0x00,0x10,0x00,0x00,0xCC,0x00,0x18,0x00,
  0x00,0x10,0x00,0x01,0xCC,0x00,0x18,0x00,
  0x00,0x10,0x00,0x01,0x8C,0x00,0x18,0x00,
  0x00,0x10,0x00,0x03,0x8C,0x00,0x18,0x00,
  0x00,0x10,0x00,0x07,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x00,0x06,0x0C,0x00,0x18,0x00,
  0x00,0x10,0x60,0x0C,0x0C,0x00,0x18,0x00,
  0x00,0x10,0xC0,0x1C,0x0C,0x00,0x18,0x00,
  0x00,0x11,0x80,0x38,0x0C,0x00,0x18,0x00,
  0x00,0x33,0x00,0x70,0x0C,0x00,0x18,0x00,
  0x00,0x3E,0x00,0xE0,0x0C,0x00,0x18,0x00,
  0x00,0x3C,0x01,0xC0,0x0C,0x00,0x18,0x00,
  0x00,0x7C,0x03,0x80,0x0C,0x00,0x18,0x00,
  0x00,0x78,0x06,0x00,0x0C,0x00,0x18,0x00,
  0x00,0x30,0x0C,0x00,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x18,0x00,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x60,0x00,0x0C,0x00,0x18,0x00,
  0x00,0x00,0x80,0x07,0xFC,0x1F,0x38,0x00,
  0x00,0x03,0x00,0x01,0xF8,0x07,0xF0,0x00,
  0x00,0x00,0x00,0x00,0x38,0x01,0xF0,0x00,
  0x00,0x00,0x00,0x00,0x10,0x00,0xE0,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char shi64S[]={
/* 以下是 '使' 的 64点阵宋体 字模，512 byte */
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x10,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x00,0x1C,0x00,0x00,0xE0,0x00,0x00,
  0x00,0x00,0x3E,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x00,0x38,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x00,0x38,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x00,0x70,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x00,0x70,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x00,0x60,0x00,0x00,0xC0,0x00,0x80,
  0x00,0x00,0xE0,0x00,0x00,0xC0,0x01,0xC0,
  0x00,0x00,0xC0,0x00,0x00,0xC0,0x03,0xE0,
  0x00,0x00,0xC1,0xFF,0xFF,0xFF,0xFF,0xF0,
  0x00,0x01,0x80,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x01,0x80,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x03,0x00,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x03,0x00,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x06,0x00,0x00,0x00,0xC0,0x00,0x00,
  0x00,0x07,0x00,0x00,0x00,0xC0,0x04,0x00,
  0x00,0x0F,0xC0,0x18,0x00,0xC0,0x0F,0x00,
  0x00,0x0F,0xE0,0x1F,0xFF,0xFF,0xFF,0x00,
  0x00,0x19,0x80,0x18,0x00,0xC0,0x06,0x00,
  0x00,0x19,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x31,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x21,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x41,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x81,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x81,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x01,0x01,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x02,0x01,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x01,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x01,0x80,0x18,0x00,0xC0,0x04,0x00,
  0x00,0x01,0x80,0x1F,0xFF,0xFF,0xFC,0x00,
  0x00,0x01,0x80,0x18,0x00,0x80,0x04,0x00,
  0x00,0x01,0x80,0x18,0x00,0x80,0x04,0x00,
  0x00,0x01,0x80,0x10,0x01,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x01,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x01,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x01,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x01,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x01,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x01,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x83,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x43,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x43,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x22,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x1E,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x1E,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x0C,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x0F,0x00,0x00,0x00,
  0x00,0x01,0x80,0x00,0x1F,0x80,0x00,0x00,
  0x00,0x01,0x80,0x00,0x31,0xE0,0x00,0x00,
  0x00,0x01,0x80,0x00,0x60,0xF0,0x00,0x00,
  0x00,0x01,0x80,0x01,0xC0,0x3E,0x00,0x00,
  0x00,0x01,0x80,0x03,0x00,0x1F,0xC0,0x00,
  0x00,0x01,0x80,0x0E,0x00,0x07,0xFF,0xF0,
  0x00,0x01,0x80,0x38,0x00,0x01,0xFF,0xF0,
  0x00,0x01,0x00,0xC0,0x00,0x00,0x3F,0xC0,
  0x00,0x00,0x07,0x00,0x00,0x00,0x07,0x80,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
char yong64S[]={
/* 以下是 '用' 的 64点阵宋体 字模，512 byte */
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x08,0x00,0x00,0x00,0x00,0x0C,0x00,
  0x00,0x0C,0x00,0x00,0x00,0x00,0x1E,0x00,
  0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0xFF,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x0E,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0C,0x00,0x00,0x80,0x00,0x08,0x00,
  0x00,0x0F,0xFF,0xFF,0xFF,0xFF,0xF8,0x00,
  0x00,0x08,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x18,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x18,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x18,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x18,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x18,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x10,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x10,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x30,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x20,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x20,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x60,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x40,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x40,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x80,0x00,0x01,0x80,0x00,0x08,0x00,
  0x00,0x80,0x00,0x01,0x80,0x00,0x08,0x00,
  0x01,0x00,0x00,0x01,0x80,0x40,0x18,0x00,
  0x00,0x00,0x00,0x01,0x80,0x3F,0xF8,0x00,
  0x02,0x00,0x00,0x01,0x80,0x07,0xF8,0x00,
  0x04,0x00,0x00,0x01,0x80,0x03,0xF8,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0xF8,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x70,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x40,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
  0x00,0x00,0x00,0x00,0x00,0x00,0x00,0x00,
};
void drawmat(char *mat, int matsize, int x, int y, int color) /*汉字点阵*/
{
    int i, j, k, m;
    m = (matsize - 1) / 8 + 1;
    for(j = 0; j < matsize; j++)
        for(i = 0; i < m; i++)
            for(k = 0; k < 8; k++)
                if(mat[j*m+i]&(0x80 >> k))
                    putpixel(x + i * 8 + k, y + j, color);
}

void slight()      /*******演示界面函数******/
{
    int i;
    char str[2];
    int driver=DETECT,mode=0;
    registerbgidriver(EGAVGA_driver);
    initgraph(&driver,&mode,"");
    setbkcolor(7);
    setwritemode(0);
    setcolor(9);
    setlinestyle(0,1,1);
    rectangle(10,10,500,450);

    drawmat(zuo16K,16,530,380,3);
    drawmat(zhe16K,16,560,380,3);
    drawmat(zhan16K,16,520,410,5);
    drawmat(zhao16K,16,545,410,5);
    drawmat(ji16K,16,570,410,5);
    drawmat(han32L,32,560,60,4);
    drawmat(nuo32L,32,560,90,6);
    drawmat(ta32L,32,560,120,9);
    drawmat(yan32L,32,560,150,2);
    drawmat(shi32L,32,560,180,5);
    setcolor(4);
    line(100,100,100,300);
    line(250,100,250,300);
    line(400,100,400,300);
    setcolor(1);
    line(10,300,500,300);
    drawmat(yi16K,16,95,320,5);
    drawmat(er16K,16,245,320,2);
    drawmat(san16K,16,395,320,3);

    drawmat(yi16S,16,300,385,5);
    drawmat(dong16S,16,320,385,3);
    drawmat(ci16S,16,340,385,6);
    drawmat(shu16S,16,360,385,2);

    drawmat(zan16S,16,60,360,2);
    drawmat(ting16S,16,80,360,3);
    drawmat(tui16S,16,60,400,5);
    drawmat(chu16S,16,80,400,9);

    settextstyle(0, 0, 1);
    sprintf(str,"P");
    outtextxy(120, 365, str);
    sprintf(str, "O");
    outtextxy(120, 405, str);
}
void p(int hao,int pan,int ceng)/*pan（第几号盘，第几盘上，第几层）*/
{
    if(pan==1)
        line(100-hao*10,300-ceng*10,100+hao*10,300-ceng*10);
    if(pan==2)
        line(250-hao*10,300-ceng*10,250+hao*10,300-ceng*10);
    if(pan==3)
        line(400-hao*10,300-ceng*10,400+hao*10,300-ceng*10);
}

int f(int n,int a,int b,int c,int time)  /********汉诺塔演示函数******/
{   char str[1];
    int ph;
    char key;
    if(bioskey(1))
    {
        key=bioskey(0);
        if(key=='p')
        {
            settextstyle(0, 0, 2);
            sprintf(str, "%d",count);
            outtextxy(400, 385, str);
            setfillstyle(SOLID_FILL,7);
            getch();
            bar(400,385,445,400);
        }
        if(key=='o')
        {
            closegraph();
            return 0;
        }
    }
    if(n==1)
    {   settextstyle(0, 0, 2);
        sprintf(str, "%d",count++);
        outtextxy(400, 385, str);
        setfillstyle(SOLID_FILL,7);

        sleep(time);
        bar(400,385,445,400);
        if(a==1&&b==2)
        {
            setcolor(7);
            p(n,a,c1--);
            putpixel(100,300-(c1+1)*10,4);
            setcolor(6);
            c2++;
            ph=c2;
            p(n,b,ph);
        }

        if(a==1&&b==3)
        {
            setcolor(7);
            p(n,a,c1--);
            putpixel(100,300-(c1+1)*10,4);
            setcolor(6);
            c3++;
            ph=c3;
            p(n,b,ph);
        }
        if(a==2&&b==1)
        {
            setcolor(7);
            p(n,a,c2--);
            putpixel(250,300-(c2+1)*10,4);
            setcolor(6);
            c1++;
            ph=c1;
            p(n,b,ph);
        }
        if(a==2&&b==3)
        {
            setcolor(7);
            p(n,a,c2--);
            putpixel(250,300-(c2+1)*10,4);
            setcolor(6);
            c3++;
            ph=c3;
            p(n,b,ph);
        }
        if(a==3&&b==1)
        {
            setcolor(7);
            p(n,a,c3--);
            putpixel(400,300-(c3+1)*10,4);
            setcolor(6);
            c1++;
            ph=c1;
            p(n,b,ph);
        }
        if(a==3&&b==2)
        {
            setcolor(7);
            p(n,a,c3--);
            putpixel(400,300-(c3+1)*10,4);
            setcolor(6);
            c2++;
            ph=c2;
            p(n,b,ph);
        }
    }

    else
    {
        f(n-1,a,c,b,time);
        settextstyle(0, 0, 2);
        sprintf(str, "%d",count++);
        outtextxy(400, 385, str);
        setfillstyle(SOLID_FILL,7);

        sleep(time);
        bar(399,385,445,400);
        if(a==1&&b==2)
        {
            setcolor(7);
            p(n,a,c1--);
            putpixel(100,300-(c1+1)*10,4);
            setcolor(6);
            c2++;
            ph=c2;
            p(n,b,ph);
        }

        if(a==1&&b==3)
        {
            setcolor(7);
            p(n,a,c1--);
            putpixel(100,300-(c1+1)*10,4);
            setcolor(6);
            c3++;
            ph=c3;
            p(n,b,ph);
        }
        if(a==2&&b==1)
        {
            setcolor(7);
            p(n,a,c2--);
            putpixel(250,300-(c2+1)*10,4);
            setcolor(6);
            c1++;
            ph=c1;
            p(n,b,ph);
        }
        if(a==2&&b==3)
        {
            setcolor(7);
            p(n,a,c2--);
            putpixel(250,300-(c2+1)*10,4);
            setcolor(6);
            c3++;
            ph=c3;
            p(n,b,ph);
        }
        if(a==3&&b==1)
        {
            setcolor(7);
            p(n,a,c3--);
            putpixel(400,300-(c3+1)*10,4);
            setcolor(6);
            c1++;
            ph=c1;
            p(n,b,ph);
        }
        if(a==3&&b==2)
        {
            setcolor(7);
            p(n,a,c3--);
            putpixel(400,300-(c3+1)*10,4);
            setcolor(6);
            c2++;
            ph=c2;
            p(n,b,ph);
        }
        f(n-1,c,b,a,time);
    }


}
int hannuota(int n,int a,int b,int c)     /*汉诺塔后台运行函数*/
{
    if(n==1);
    else
    {
        hannuota(n-1,a,c,b);
        hannuota(n-1,c,b,a);
    }
}
int main()
{
    int number;
    int a=1,b=2,c=3;
    int i,time;
    int *r;
    char v;
    char str[1];
    double mean=0;
    clock_t start,end;
    int driver=DETECT,mode=0;
    r=&c1;
    system("graftable 936");
    system("cls");
    /********小窗口部分***********/
    gotoxy(31,10);
    printf("汉诺塔演示程序");
    gotoxy(20,15);
    printf("%c",14);                  /*起*/
    gotoxy(10,13);
    printf("%c",15);                  /*始*/
    gotoxy(30,17);
    printf("%c",3);                   /*界*/
    gotoxy(34,18);
    printf("欢迎使用！");             /*面*/
    gotoxy(15,19);
    printf("***************************************************");
    gotoxy(10,20);
    printf("**************************************************************\n");
    getch();
    system("cls");
    printf("\n\n\n\n                       请输入搬运盘数和搬运速度（IS）：\n\n");
    printf("               如”4 1“表示每一秒搬运一个盘子，共搬运4个盘子。\n\n");
    printf("                                     ");
    scanf("%d",&number);
    scanf("%d",&time);
    printf("\n\n\n\n\n   Prompt:\n\n");
    printf("            This procedure dosen't working in any system but win XP.\n\n\n");
    printf("                      press any key to continue...");
    getch();
    *r=number;
    if(number<=7)
    {
        slight();
        getch();
        for(i=1;i<=number;i++)
        {
            p(i,1,number-i+1);
        }
        f(number,a,b,c,time);
        settextstyle(0, 0, 2);
        sprintf(str, "%d",count);
        outtextxy(400, 385, str);
        setfillstyle(SOLID_FILL,7);
        getch();
        closegraph();


        registerbgidriver(EGAVGA_driver);
        initgraph(&driver,&mode,"");
        setbkcolor(7);
        setwritemode(0);
        setcolor(9);
        setlinestyle(0,1,1);
        rectangle(20,20,600,450);
        drawmat(xie64S,64,60,60,2);
        drawmat(xie64S,64,120,80,3);
        drawmat(shi64S,64,180,100,4);
        drawmat(yong64S,64,260,120,5);
    }
    else
    {
        
        system("cls");
        printf("由于演示过程将比较久，因此系统不给予演示只给出搬运%d个盘子所历时。\n\n",number);
        printf("正在计算计算机即时搬运速度...\n\n");
        start=clock();
        hannuota(27,a,b,c);
        end=clock();mean=(double)(end-start)/18.2;
        printf("计算机平均搬运速度为%.2lf次每秒\n\n",mean=(double)134217728/mean);
        printf("计算机搬运%d个盘子估计需%.2lf秒,合计%.0lf天\n\n",number,pow(2,number)/mean,pow(2,number)/mean/86400);
        getch();
        system("cls");
        gotoxy(27,8);printf("*************************");
        gotoxy(35,6);
        printf("谢谢使用\n\n\n\n                                                ---ph\n");

    }
    getch();

}
